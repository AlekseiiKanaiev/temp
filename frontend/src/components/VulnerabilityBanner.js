import React from 'react';
import PropTypes from 'prop-types';
import { Grid, GridColumn } from '@atlaskit/page';
import styled from 'styled-components';
import VulnarabilityBadges from './VulnarabilityBadges';

const BannerWrapper = styled.div`
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); /* Параметры тени */
  padding: 10px;
  margin-top: 20px;
`;
const BadgesWrapper = styled.div`
  float: right;
`;

const TextWrapper = styled.p`
  float: left;
  font-weight: bolder;
`;

const getTotal = ({ low, medium, high }) => low + medium + high;

export default function VulnerabilityBanner({ issueCounts }) {
  return (
    <BannerWrapper>
      <Grid layout="fluid">
        <GridColumn medium={9}>
          <TextWrapper>
            {`Snyk found ${getTotal(
              issueCounts,
            )} vulnerabilities in this repository`}
          </TextWrapper>
        </GridColumn>
        <GridColumn medium={3}>
          <BadgesWrapper>
            <VulnarabilityBadges issueCounts={issueCounts} />
          </BadgesWrapper>
        </GridColumn>
      </Grid>
    </BannerWrapper>
  );
}

VulnerabilityBanner.propTypes = {
  issueCounts: PropTypes.shape({
    high: PropTypes.number.isRequired,
    medium: PropTypes.number.isRequired,
    low: PropTypes.number.isRequired,
  }).isRequired,
};
