import React from 'react';
import styled from 'styled-components';
import InlineMessage from '@atlaskit/inline-message';

export default function IssueCardVulnarability({ issue }) {
  const ScoreWrapper = styled.span`
    font-weight: bold;
    float: right;
    height: 10px;
  `;

  const vulnerability = () => {
    const items = issue.issueData.identifiers;
    const links = Object.keys(items).flatMap((item) => items[item].map((element) => <a href="#">{element}</a>));
    const result = [];
    links.forEach((link) => {
      result.push(' | ');
      result.push(link);
    });
    return result;
  };

  return (
    <>
      {' '}
      VULNERABILITY
      {vulnerability().map((item) => item)}
      <ScoreWrapper>
        {`SCORE ${issue.priority.score} `}
        <InlineMessage type="info" placement="top-end">
          <div style={{ fontSize: 'smaller' }}>
            <p>Why this priority score?</p>
            <ul>
              {issue.priority.factors.map((factor) => <li>{factor.description}</li>)}
            </ul>
          </div>
        </InlineMessage>
      </ScoreWrapper>
    </>
  );
}
