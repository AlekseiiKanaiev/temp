import React, { useEffect, useState } from 'react';
import Tooltip from '@atlaskit/tooltip';
import SnykTag from './SnykTag';
import './VulnerabilityBadge.scss';

export default function VulnerabilityBadge({ color, data, isCriticaEnabled }) {
  const [colour, setColour] = useState('red');
  const [value, setValue] = useState('');
  useEffect(() => {
    switch (color) {
      case 'redc':
        setColour('critical');
        setValue(`C ${data}`);
        break;
      case 'red':
        setColour('high');
        setValue(`H ${data}`);
        break;
      case 'yellow':
        setColour('medium');
        setValue(`M ${data}`);
        break;
      case 'black':
        setColour('low');
        setValue(`L ${data}`);
        break;
      default:
        break;
    }
  }, [color, data]);

  const toolTipContent = isCriticaEnabled
    ? 'A vulnerability\'s severity (critical, high, medium or low) is based on its CVSS score:\n- CVSS score of 7-10: Critical or High\n- CVSS score of 4-6.9: Medium\n- CVSS score of 0-3.9: Low'
    : 'A vulnerability\'s severity (high, medium or low) is based on its CVSS score:\n- CVSS score of 7-10: High\n- CVSS score of 4-6.9: Medium\n- CVSS score of 0-3.9: Low';

  return (
    <div className="badge-wrapper">
      <Tooltip content={toolTipContent}>
        <SnykTag color={colour} text={value} width="50px" />
      </Tooltip>
    </div>
  );
}
